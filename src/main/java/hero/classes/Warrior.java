package hero.classes;

import hero.Hero;
import fight.dto.AttackDto;
import fight.dto.DefenseDto;
import lombok.Getter;
import dto.damage.DamageDto;
import spec.HeroClass;

import java.util.List;

import static tools.Dice.getChance;
import static tools.Dice.randomInt;

@Getter
public class Warrior extends Hero {

    private final HeroClass heroClass = HeroClass.WARRIOR;

    //Классовые константы
    private static final Integer INTELLIGENCE = 1;

    private static final Integer STRENGTH = 4;

    private static final Integer DEXTERITY = 4;

    /**
     * Шанс заблокировать весь урон.
     */
    public static final double BLOCK_CHANCE = 0.4;

    public Warrior(String name) {
        super();

        setName(name);

        //STATS
        setIntelligence(INTELLIGENCE);

        setStrength(STRENGTH);

        setDexterity(DEXTERITY);

        //Воин уже в начале боя заряжен на удар
        setReloader(1D);
        getHealth().fillUp();
    }


    @Override
    public DefenseDto defense(AttackDto attack) {
        double tryToDefense = getChance();
        double pain = getShield().takeDamage(attack.getDamageDto().getFullDamage());

        if (BLOCK_CHANCE >= tryToDefense) {
            pain = 0;
            return new DefenseDto(pain,
                    "по хуй дым! " + this.getName() + " защитился!");
        }

        takeDamage(pain);
        return new DefenseDto(pain, this.getName() + " пропизжен");
    }

    public String getRandomAttackMessage() {
        int index = randomInt(WARRIOR_ATTACK_MESSAGES.size());
        return String.format(WARRIOR_ATTACK_MESSAGES.get(index), getName());
    }
    private static final List<String> WARRIOR_ATTACK_MESSAGES = List.of(
            "%s врезал так, что воздух взвыл от боли!",
            "%s нанёс удар такой силы, коим можно было сокрушить горы!",
            "%s взревел как бешеный бык, и жахнул врага!",
            "%s смачно всёк, что аж искры посыпались!",
            "%s удар врагу пришёлся, словно топор в пень!",
            "БА-БАХ! И духи предков зааплодировали в Вальхалле!",
            "%s взмахнул оружием... и-и-И-И!!!Ё, ХЭЭС! Аж трава в стороны легла!",
            "%s вложил в удар всю ненависть. Боль настигнет врага!",
            "Вальхаллеа ждёт! Проревел %s",
            "Будто молния, %s шарахнул с небес!",
            "%s сделал обманный манёвр, да так въехал, что будь противник трезвым – он бы опьянел!",
            "%s двинул так, что зубы в пляс пошли!",

            "%s дал такого леща своим клинком, что даже гром в небе присел от страха!",
            "%s не стал мямлить, а взял да и приложил с такой силой, что у врага аж пятки зачесались!",
            "%s с грохотом снёс быкающим ударом всё, что стояло на пути!",
            "%s вложил всю злость в один-единственный мах, и не зря – удар получился сокрушающим!",
            "%s подскочил, замахнулся и с громогласным рёвом ударил, будто сам бог войны сошёл на землю!",
            "%s так рубанул, что враг успел только перекреститься!",
            "%s сделал ложный выпад, да так ловко, что враг уже прощался с жизнью!",
            "%s ухватил оружие поудобнее и шарахнул, как будто вырезает себе путь в легенды!",
            "%s не стал долго думать и вмазал так, что аж земля содрогнулась!",
            "%s шагнул, подобно буре, и снёс всё, что осмелилось стоять на его пути!",
            "%s занёс оружие над головой и с воплем всадил удар, будто крушит цепи самой судьбы!",
            "%s сделал такой сокрушающий выпад, что даже камни застонали от страха!",
            "%s вдарил с такой звериной яростью, что воздух сам отошёл в сторону!",
            "%s рубанул, будто дровосек на лесоповале, только вот вместо деревьев — кости врагов!",
            "%s поднял оружие, завёл руку за спину и смачно приложился, словно выбивая пыль из ковра!",
            "%s с кровавой ухмылкой сделал шаг вперёд и всадил свою сталь с такой силой, что враг осознал все ошибки жизни!",
            "%s крутанул оружие, словно ветер в бурю, и нанёс сокрушительный удар!",
            "%s не стал любезничать – замахнулся и вдарил, будто он кузнец, а враг – железо на наковальне!"
    );

    @Override
    public String getRandomMissedMessage() {
        int index = randomInt(WARRIOR_MISSED_MESSAGES.size());
        return String.format(WARRIOR_MISSED_MESSAGES.get(index), getName());
    }
    private static final List<String> WARRIOR_MISSED_MESSAGES = List.of(
            "%s поклялся богам, что размажет врага… но пока он смог размазать лишь воздух!",

            "%s Проклятые духи леса, да чтоб вас комарье сгрызло!",
            "%s размахнулся, но враг оказался хитрее – лишь ветер всколыхнулся!",
            "%s лупит топором, но вместо мяса рубит воздух!",
            "%s взревел, размахнулся… и пропахал землю, а не врага!",
            "%s плюётся, орёт, но топор его предательски скользит мимо цели!",
            "%s целился в череп, а попал... в собственную бороду!",
            "%s замахнулся так, что деревья закачались – но врага даже не задел!",
            "%s смачно чертыхнулся – кто-то заколдовал его руки?!",
            "%s попытался дать с ноги, но едва не вляпался в старый костёр!",
            "%s со всей силы ударил, но, видимо, судьба – подлая сука!",
            "%s орёт, машет руками – похоже, пытается напугать врага мимикой!",
            "%s чуть не отрубил себе ногу – да кто так вертится во время боя?!",
            "%s попал... в тень противника! Ну хоть что-то.",
            "%s хрипло дышит – не из-за усталости, а от злобы! Этот гад уклонился!",
            "%s промахнулся, и теперь его топор застрял в земле! Время для мата!",
            "%s от досады сплюнул – его ярость теперь опаснее, чем удар!",
            "%s издал дикий рык – ну теперь-то точно попадёт!",
            "%s попытался зарядить по печени, но ударил себя в колено!",
            "%s прицелился, нанёс удар, но враг – юркая блоха, ушёл!",
            "%s злобно рычит – в следующий раз этот гад не уйдёт!",
            "%s взревел, но вместо удара его кулак встретил лишь воздух!",
            "%s подпрыгнул, чтобы ударить сверху – и вместо этого сел в лужу!",
            "%s попытался двинуть щитом, но враг оказался ловчее!",
            "%s чуть не снес забор позади врага – и где он, этот проклятый?!"
    );

    @Override
    public String getRandomReloadMessage() {
        int index = randomInt(WARRIOR_RELOAD_MESSAGES.size());
        return String.format(WARRIOR_RELOAD_MESSAGES.get(index), getName());
    }
    private static final List<String> WARRIOR_RELOAD_MESSAGES = List.of(
            "%s хрустит кулаками",
            "%s готовится к яростному броску!",
            "%s поплевав на ладони перехватывает оружие поудобнее.",
            "%s пригнулся к земле",
            "\"Хмммм\" злобно хмыкнул %s",
            "%s вздувает вены от напряжения!",
            "%s щурится, выбирая куда бить!",

            "%s рычит, бьёт кулаком в ладонь – сейчас что-то сломается!",
            "%s размашисто крутит топор, высекая искры из земли!",
            "%s стучит кулаком по груди, взывая к духам предков!",
            "%s чертыхнулся, поправил хват – следующий удар будет точным!",
            "%s потряс оружием над головой, выкрикивая угрозы врагу!",
            "%s размахнулся так, что даже воздух завопил от страха!",
            "%s закусил губу, измеряя расстояние – скоро время ударять!",
            "%s глубоко вдохнул, набирая силу – варвару некуда торопиться!",
            "%s проводит пальцем по лезвию – отточено, готово к битве!",
            "%s расставил ноги шире – теперь враг не уйдёт!",
            "%s бросает взгляд, полный обещания смерти – скоро бой!",
            "%s поигрывает мускулами, устрашающе ухмыляясь.",
            "%s покачал головой – не сейчас, но скоро, очень скоро…"
    );

}
